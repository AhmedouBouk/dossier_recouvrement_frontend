<div class="container">
  <div class="alert error" *ngIf="errorMessage">
    <i class="material-icons">error</i>
    {{ errorMessage }}
  </div>

  <div class="card-container">
    <form (ngSubmit)="addCredit()" #addForm="ngForm" class="add-form">
      <div class="form-section">
        <h3 class="section-title">Informations du crédit</h3>
        <div class="form-grid">
          <div class="form-group">
            <label for="idCompte">Compte</label>
            <div class="input-with-icon">
              <i class="material-icons">account_circle</i>
              <input 
                id="idCompte"
                [(ngModel)]="creditForm.idCompte"
                name="idCompte"
                type="text"
                required>
            </div>
          </div>

          <div class="form-group">
            <label for="typeGarantie">Type Garantie</label>
            <div class="input-with-icon">
              <i class="material-icons">security</i>
              <input 
                id="typeGarantie"
                [(ngModel)]="creditForm.typeGarantie"
                name="typeGarantie"
                type="string"
                required>
            </div>
          </div>

          <div class="form-group">
            <label for="valeurGarantie">Valeur Garantie</label>
            <div class="input-with-icon">
              <i class="material-icons">euro</i>
              <input 
                id="valeurGarantie"
                [(ngModel)]="creditForm.typeGarantie"
                name="valeurGarantie"
                type="number"
                min="0"
                required>
            </div>
          </div>

          <div class="form-group">
            <label for="montant">Montant</label>
            <div class="input-with-icon">
              <i class="material-icons">euro</i>
              <input 
                id="montant"
                [(ngModel)]="creditForm.montant"
                name="montant"
                type="number"
                min="0"
                required>
            </div>
          </div>

          <div class="form-group">
            <label for="tauxInteret">Taux d'intérêt (%)</label>
            <div class="input-with-icon">
              <i class="material-icons">percent</i>
              <input 
                id="tauxInteret"
                [(ngModel)]="creditForm.tauxInteret"
                name="tauxInteret"
                type="number"
                step="0.01"
                min="0"
                max="100"
                required>
            </div>
          </div>

          <div class="form-group">
            <label for="duree">Durée (mois)</label>
            <div class="input-with-icon">
              <i class="material-icons">calendar_today</i>
              <input 
                id="duree"
                [(ngModel)]="creditForm.duree"
                name="duree"
                type="number"
                min="1"
                required>
            </div>
          </div>

          <div class="form-group">
            <label for="dateDebut">Date de début</label>
            <div class="input-with-icon">
              <i class="material-icons">event</i>
              <input 
                id="dateDebut"
                [(ngModel)]="creditForm.dateDebut"
                name="dateDebut"
                type="date"
                required>
            </div>
          </div>

          <div class="form-group">
            <label for="statut">Statut</label>
            <div class="input-with-icon">
              <i class="material-icons">flag</i>
              <select 
                id="statut"
                [(ngModel)]="creditForm.statut"
                name="statut"
                required>
                <option value="En cours">En cours</option>
                <option value="En attente">En attente</option>
                <option value="Approuvé">Approuvé</option>
              </select>
            </div>
          </div>

          <div class="form-group">
            <label for="refTransaction">Référence Transaction</label>
            <div class="input-with-icon">
              <i class="material-icons">receipt</i>
              <input 
                id="refTransaction"
                [(ngModel)]="creditForm.refTransaction"
                name="refTransaction"
                type="text">
            </div>
          </div>

          <div class="form-group">
            <label for="fondDossier">Fond Dossier</label>
            <div class="input-with-icon">
              <i class="material-icons">folder</i>
              <input 
                id="fondDossier"
                [(ngModel)]="creditForm.fondDossier"
                name="fondDossier"
                type="text"
                required>
            </div>
          </div>
        </div>
      </div>

      <div class="form-actions">
        <button type="button" class="cancel-btn" (click)="cancel()">
          <i class="material-icons">close</i>
          Annuler
        </button>
        <button 
          type="submit" 
          class="submit-btn" 
          [disabled]="!addForm.form.valid || isLoading">
          <i class="material-icons">save</i>
          {{ isLoading ? 'Création...' : 'Créer le crédit' }}
        </button>
      </div>
    </form>
  </div>
</div>