<div class="container mt-4">
    <!-- Titre principal -->
    <h2 class="text-center">Gestion des Crédits</h2>
  
    <!-- Section de recherche -->
    <div class="search-bar my-4">
      <input
        type="text"
        class="form-control"
        placeholder="Rechercher par nom de compte..."
        [(ngModel)]="searchNomCompte"
      />
      <button class="btn btn-primary mt-2" (click)="searchCredits()">Rechercher</button>
    </div>
  
    <!-- Table des crédits -->
    <table class="table table-striped table-bordered mt-4">
      <thead class="table-dark">
        <tr>
          <th>ID</th>
          <th>Nom du Compte</th>
          <th>Montant</th>
          <th>Taux d'intérêt</th>
          <th>Durée (mois)</th>
          <th>Date de début</th>
          <th>Statut</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let credit of credits">
          <td>{{ credit.idCredit }}</td>
          <td>{{ credit.idCompte }}</td>
          <td>{{ credit.montant | currency:'EUR' }}</td>
          <td>{{ credit.tauxInteret }}%</td>
          <td>{{ credit.duree }}</td>
          <td>{{ credit.dateDebut | date:'shortDate' }}</td>
          <td>{{ credit.statut }}</td>
          <td>
            <button class="btn btn-success btn-sm" (click)="startEdit(credit)">Modifier</button>
            <button class="btn btn-danger btn-sm" (click)="deleteCredit(credit.idCredit)">Supprimer</button>
            <button class="btn btn-info btn-sm" (click)="downloadDocuments(credit.idCredit)">Télécharger</button>
          </td>
        </tr>
      </tbody>
    </table>
  
    <!-- Formulaire pour ajouter ou modifier un crédit -->
    <div class="credit-form mt-5">
      <h3 *ngIf="!editMode">Ajouter un Crédit</h3>
      <h3 *ngIf="editMode">Modifier le Crédit</h3>
  
      <form>
        <div class="form-group">
          <label for="montant">Montant</label>
          <input
            type="number"
            id="montant"
            class="form-control"
            [(ngModel)]="newCredit.montant"
            [disabled]="editMode"
          />
        </div>
  
        <div class="form-group">
          <label for="tauxInteret">Taux d'intérêt (%)</label>
          <input
            type="number"
            id="tauxInteret"
            class="form-control"
            [(ngModel)]="newCredit.tauxInteret"
          />
        </div>
  
        <div class="form-group">
          <label for="duree">Durée (mois)</label>
          <input
            type="number"
            id="duree"
            class="form-control"
            [(ngModel)]="newCredit.duree"
          />
        </div>
  
        <div class="form-group">
          <label for="statut">Statut</label>
          <select id="statut" class="form-control" [(ngModel)]="newCredit.statut">
            <option value="Approuvé">Approuvé</option>
            <option value="Rejeté">Rejeté</option>
            <option value="En attente">En attente</option>
          </select>
        </div>
  
        <!-- Documents -->
        <div class="form-group">
          <label for="documents">Documents (PDF uniquement)</label>
          <input
            type="file"
            id="documents"
            (change)="onFileSelected($event, 'demande')"
            class="form-control"
          />
        </div>
  
        <button
          class="btn btn-primary mt-3"
          *ngIf="!editMode"
          (click)="addCredit()"
        >
          Ajouter
        </button>
        <button
          class="btn btn-warning mt-3"
          *ngIf="editMode"
          (click)="updateCredit()"
        >
          Mettre à jour
        </button>
      </form>
    </div>
  </div>
  